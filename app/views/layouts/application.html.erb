<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title> Mocha</title>

			<meta name="description" content="A description of the page must go here." />
			<meta name="keywords" content="keyword1,keyword2,keyword3" />
			<meta name="robots" content="INDEX,FOLLOW" />
			<%= csrf_meta_tag %>
	
	<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">

				<link rel="stylesheet" href="/stylesheets/base.css" type="text/css" media="screen" />
			<link rel="stylesheet" href="/stylesheets/modal.css" type="text/css" media="screen" />
			<link rel="stylesheet" href="/stylesheets/scrollbar.css" type="text/css" media="screen" />
				<meta charset="utf-8">
<script src="/closure-library/closure/goog/base.js"></script>

  <script>
    goog.require('goog.dom');
    goog.require('goog.events.KeyCodes');
    goog.require('goog.ui.KeyboardShortcutHandler');
    goog.require('goog.ui.AutoComplete.Basic');
  </script>
<link rel="stylesheet" href="/stylesheets/demo.css">
		<!--[if lte IE 9]>
		<link rel="stylesheet" type="text/css" href="/styles/ie.css" />
	<![endif]-->

			<script type="text/javascript" src="/javascripts/size-container.js"></script>
			<script type="text/javascript" src="/javascripts/open.js"></script>
      <%= javascript_include_tag 'jquery-1.4.4.min','jquery.validate','date', 'colorpicker','eye','utils','jquery.fileupload-ui','jquery.fileupload' ,'application'%>
      <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
      <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

			<%=stylesheet_link_tag "colorpicker"%>
		
<script src="/javascripts/key.js"></script>

			<%= csrf_meta_tag %>
	
	<!--[if lt IE 7]>
	<script src="http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js" type="text/javascript"></script>
	<![endif]-->

	<!--[if IE 6]>
	<script type="text/javascript">
		// Load jQuery if not already loaded
		if (typeof jQuery == 'undefined') {
			document.write('<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></'+'script>');
			var __noconflict = true;
		}
		var IE6UPDATE_OPTIONS = {icons_path: '/scripts/third-party/ieupdate/images/'};
	</script>
	<script src="/scripts/third-party/ieupdate/ie6update.js" type="text/javascript"></script>
	<![endif]-->

	
	<!--<link rel="shortcut icon" href="/images/favicon.ico" />-->
</head>

<body class="tasks">

<%= render :partial=>'/layouts/header'%>
	
<div class="clear-fix"></div>
<div id="container">
	
	<%#= render :partial=>'/layouts/first_panel'%>
	<%#= render :partial=>'/layouts/second_panel'%>
	<%#= render :partial=>'/layouts/third_panel'%>
  <%=yield%>


	<div class="clear-fix"></div>
</div>
<div class="modal add-item-modal" style="display:none">
	<div class="modal-top-left"></div>
<%#= render :partial =>'/projects/new'%>
<%#= render :partial =>'/projects/add_new'%>
	<div class="modal-bottom-left"></div>
	<div class="modal-bottom"></div>
	<div class="modal-bottom-right"></div>
</div>
<div id="add_new_mod">
</div>
<%=render "/layouts/name_settings"%>
 
</body>


    <div id="ram"></div>
  
       


<script>

    function showTriggered(event) {
                
          if(event.identifier=='ENTER')
                   {
                           short_modal('/projects/add_new');
        }
                                
                                if(event.identifier=='GS')
                   {
                             short_modal2('/settings');

        }
				if(event.identifier=='GP')
                   {
                             short_modal2('/settings-profile');

        }
					if(event.identifier=='Q')
                   {
                             short_modal2('/messages');

        }
                                
      if(event.identifier=='SHIFT_M')
                   {
                             short_modal1('/messages/new');
        }
               if(event.identifier=='ESC')
                   {
                             short_modal1('esc');
        }
                                                 
    }
                
        

   var shortcutHandler = new goog.ui.KeyboardShortcutHandler(document);
      var NONE = goog.ui.KeyboardShortcutHandler.Modifiers.NONE;   
			 var ESC = goog.ui.KeyboardShortcutHandler.Modifiers.ESC; 
   var CTRL = goog.ui.KeyboardShortcutHandler.Modifiers.CTRL;
   var SHIFT = goog.ui.KeyboardShortcutHandler.Modifiers.SHIFT;
var ENTER= goog.ui.KeyboardShortcutHandler.Modifiers.ENTER;
   //var S=  goog.ui.KeyboardShortcutHandler.Modifiers.S;            
         shortcutHandler.registerShortcut('ENTER',goog.events.KeyCodes.ENTER);
         shortcutHandler.registerShortcut('ESC',goog.events.KeyCodes.ESC);
         shortcutHandler.registerShortcut('SHIFT_M',goog.events.KeyCodes.M, SHIFT);
             shortcutHandler.registerShortcut('Q',goog.events.KeyCodes.Q)

        
         
         shortcutHandler.registerShortcut('GS',goog.events.KeyCodes.G, NONE,
                                                                        goog.events.KeyCodes.S);
         
         
          shortcutHandler.registerShortcut('GP',goog.events.KeyCodes.G, NONE,
                                                                        goog.events.KeyCodes.P);

 


         
                
    shortcutHandler.registerShortcut('BACK_SPACE', goog.events.KeyCodes.BACKSPACE);

   goog.events.listen(shortcutHandler,goog.ui.KeyboardShortcutHandler.EventType.SHORTCUT_TRIGGERED,showTriggered);
        
  
        $(document).ready(function(){
                        $('a.menutext').click(function(){
                                        path=($(this).attr('href'));
                                redirect_short(path);
                                 return false;
                        });

        });
        
           function short_modal(path)  //Add new project/messsage/task/tasclist
{
  $.ajax({
       type :'post',
       url :path,
            success: function(data){
						$('#add_new_mod').html(data);  
						$('#add_new_mod').show();  
       }
    });
	 }
  function short_modal1(path)  //Add new project/messsage/task/tasclist
{
if (path!='esc')
{
  $.ajax({
       type :'get',
       url :path,
            success: function(data){
						$('#add_new_mod').html(data);  
						$('#add_new_mod').show();  
       }
    });
		}
		else
		{
		$('#add_new_mod').hide(); 
		$('#add_people').hide(); 
		}
        }
		   function short_modal2(path)
{

 /* $.ajax({
       type :'get',
       url :path,
            success: function(data){
						$('.task').html(data);  
						$('.task').show();  
       }
    });*/
		window.location.href=path;
		}
</script>






</html>

